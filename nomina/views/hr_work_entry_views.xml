<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_hr_work_entry_tree_inherit" model="ir.ui.view">
        <field name="name">hr.work.entry.tree.inherit</field>
        <field name="model">hr.work.entry</field>
        <field name="inherit_id" ref="hr_work_entry.hr_work_entry_view_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date_start']" position="attributes">
                <attribute name="options">{'timezone': 'UTC'}</attribute>
            </xpath>
            <xpath expr="//field[@name='date_stop']" position="attributes">
                <attribute name="options">{'timezone': 'UTC'}</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_hr_work_entry_form_inherit" model="ir.ui.view">
        <field name="name">hr.work.entry.form.inherit</field>
        <field name="model">hr.work.entry</field>
        <field name="inherit_id" ref="hr_work_entry.hr_work_entry_view_form"/>
        <field name="arch" type="xml">
<!--            <sheet>-->
<!--                <div class="oe_chatter">-->
<!--                    <field name="message_follower_ids" widget="mail_followers"/>-->
<!--                    <field name="activity_ids" widget="mail_activity"/>-->
<!--                    <field name="message_ids" widget="mail_thread"/>-->
<!--                </div>-->
<!--            </sheet>-->
            <xpath expr="//field[@name='contract_id']" position="after">
                <field name="contract_state"/>
                <field name="frecuencia_pago"/>
                <field name="descripcion"/>
            </xpath>
            <!--contract_id no sea readonly-->
            <xpath expr="//field[@name='contract_id']" position="attributes">
                <attribute name="readonly">0</attribute>
            </xpath>
            <xpath expr="//field[@name='date_stop']" position="after">
                <field name="fecha_inicio" widget="date"/>
                <field name="fecha_fin" widget="date"/>
            </xpath>
            <xpath expr="//field[@name='date_start']" position="attributes">
                <attribute name="options">{'timezone': 'UTC'}</attribute>
                <attribute name="string">Fecha Aplicar</attribute>
            </xpath>
            <xpath expr="//field[@name='date_stop']" position="attributes">
                <attribute name="options">{'timezone': 'UTC'}</attribute>
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath expr="//field[@name='fecha_fin']" position="after">
                <field name="dias"/>
                <field name="duration"/>
            </xpath>
        </field>
    </record>

<!-- Vista para el historial de vacaciones -->
    <record id="hr_work_entry_history_view_tree" model="ir.ui.view">
        <field name="name">hr.work.entry.history.view.tree</field>
        <field name="model">hr.work.entry</field>
        <field name="arch" type="xml" >
            <list string="Historial de Vacaciones">
<!--                <field name="name" />-->
                <field name="employee_id"/>
<!--                <field name="work_entry_type_id" string="Periodo" />-->
                <field name="descripcion"/>
                <field name="fecha_inicio"/>
                <field name="fecha_fin"/>
            </list>
        </field>
    </record>

    <!-- Acción para la vista del historial de vacaciones -->
    <record model="ir.actions.act_window" id="action_hr_work_history">
        <field name="name">Historial de Vacaciones</field>
        <field name="res_model">hr.work.entry</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="hr_work_entry_history_view_tree"/>
        <field name="domain">[('work_entry_type_id', 'in', [30, 33])]</field>
    </record>

    <!-- Menú de configuración para el historial de vacaciones -->
    <menuitem
        id="menu_historial_vacaciones"
        name="Historial de Vacaciones"
        action="action_hr_work_history"
        parent="hr_work_entry_contract_enterprise.menu_hr_payroll_work_entries_root"
        sequence="60"/>
</odoo>
